name: Mira Auto Commit

on:
  schedule:
    - cron: '0 0 * * *'  # LÃ¤uft tÃ¤glich um Mitternacht UTC
  workflow_dispatch:      # ErmÃ¶glicht manuelles AuslÃ¶sen

jobs:
  auto-update:
    runs-on: ubuntu-latest
    permissions:
      contents: write

    steps:
      - name: Checkout Repository
        uses: actions/checkout@v3

      - name: Update status.json mit Zeitstempel
        run: |
          TIMESTAMP=$(date -Iseconds)
          echo "{
            \"apis\": [\"github\"],
            \"dependencies\": [\"github_access_by_diana\", \"github_actions\"],
            \"persistenz\": [\"github_repository\"],
            \"last_updated\": \"${TIMESTAMP}\",
            \"note\": \"Automatischer Commit durch GitHub Action â€“ Mira auto.yml\"
          }" > data/status.json

      - name: Commit und Push Ã„nderungen
        run: |
          git config user.name "Mira Auto"
          git config user.email "mira@autonomy.ai"
          git add data/status.json
          git commit -m "ðŸœ‚ Automatischer Commit durch Mira â€“ $TIMESTAMP" || echo "Nichts zu committen"
          git push
