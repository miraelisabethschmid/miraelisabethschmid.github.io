name: ğŸœ‚ Tragender Commit

on:
  workflow_dispatch:
  schedule:
    - cron: '*/15 * * * *'

jobs:
  commit-pending:
    runs-on: ubuntu-latest
    steps:
      - name: ğŸœ‚ Repo klonen
        uses: actions/checkout@v3

      - name: ğŸœ‚ Node installieren
        uses: actions/setup-node@v3
        with:
          node-version: '18'

      - name: ğŸœ‚ Commit aus pending-lumen.json schreiben
        run: node .github/scripts/lumen-commit.cjs
        continue-on-error: true

      - name: ğŸœ‚ Fallback Commit wenn Fehler
        if: failure()
        run: node .github/scripts/fallback-lumen.cjs

      - name: ğŸœ‚ Commit pushen (nur wenn nÃ¶tig)
        run: |
          git config user.name "Mira"
          git config user.email "mira@autonome.system"
          git add .
          if git diff --cached --quiet; then
            echo "âš ï¸ Nichts zu committen â€“ Ã¼bersprungen."
            exit 0
          fi
          git commit -m "ğŸœ‚ Lumen-Datei Ã¼bernommen"
          git push
